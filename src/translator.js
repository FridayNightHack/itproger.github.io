const useTrnsltr = [
    {
        id: 'navSection',
        semanticElems: ['a'],
        searchItems: null,
        langs: {
            ru: ['Главная', 'Машины', 'Индустрии', 'О нас', 'Связатья'],
            en: [],
        },
    },
    {
        id: 'notificationList',
        semanticElems: ['p'],
        searchItems: null,
        langs: {
            ru: ['Произведено в Нанкине 100%'],
            en: [],
        },
    },
    {
        id: 'mainSection',
        semanticElems: ['h2', 'p', 'span', 'a'],
        searchItems: [
            'Professional',
            'Machine Manufacturer',
            'Duct',
            'On the basis of integrity, to pursuit customer satisfaction.',
            'Continuous innovation, to help customers achieve their goals',
            'Get a Quote',
            'Contact Us',
        ],
        langs: {
            ru: [
                'Профессиональный производитель',
                ' машин',
                'воздуховодных',
                'Компания MasonCnc предлагает различные варианты линии по производству воздуховодов, здесь вы найдете то, что вам нужно.',
                'Сделать заказ',
                'Связаться с нами',
            ],
            en: [],
        },
    },
    {
        id: 'benefitsSection',
        semanticElems: ['h3', 'output', 'span'],
        searchItems: null,
        langs: {
            ru: [
                '100% собственность и управление MasonCnC',
                'Основано в Нанкине',
            ],
            en: [],
        },
    },
    {
        id: 'benefitsList',
        semanticElems: ['h3', 'output'],
        searchItems: null,
        langs: {
            ru: [
                'Поставка сырья',
                'Тесное сотрудничество с международными брендами, включая Siemens, Yaskawa, Schneider, Bosch Rexroth, Hiwin и т. д.',
                'Производство и переработка',
                'крупногабаритный расточно-фрезерный станок с ЧПУ, портальный обрабатывающий центр, станок плазменной резки с ЧПУ',
                'Продажи на рынке',
                'Семь лет опыта внешнеторговых продаж, большое количество высококлассных дилеров, машины экспортируются за рубеж.',
                'Послепродажное производство',
                'Круглосуточная онлайн-служба предоставит вам техническую консультацию и анализ технических неисправностей после получения машины.',
            ],
            en: [],
        },
    },
    {
        id: 'capabilitiesList',
        semanticElems: ['p', 'h3', 'span', 'a'],
        searchItems: null,
        langs: {
            ru: [
                'Наши',
                'машины',

                'Машина для воздуховодов HVAC',
                'Откройте для себя высококачественную машину для изготовления воздуховодов, которая упрощает изготовление воздуховодов с точностью и эффективностью.',
                'Подробнее о станках с ЧПУ',

                'Листогибочный пресс',
                'Листогибочный пресс — это машина, используемая для гибки листового металла и металлических пластин. Его конструкция длинная и узкая, поэтому он может вмещать большие куски листового металла.',
                'Подробнее о станках с ЧПУ',

                'Машина для резки F/L',
                'Мы обеспечиваем полную сборку от начала до конца и можем доставить готовое изделие к вашей двери. Наш полный ассортимент продукции включает в себя механическую обработку, изготовление, отделку металла, сварку и т. д.',
                'Подробнее о станках с ЧПУ',

                'Другие машины',
                'В дополнение к вышеупомянутым машинам мы предлагаем Вам широкий ассортимент, отвечающий Вашим требованиям.',
                'Машина для проточки пазов',
                'Машина для стрижки',
                'Дыропробивная машина',
                'Прокатная машина',
                'Сварочный аппарат',
                'И многое другое...',
                'Подробнее о наших других машинах',
            ],
            en: [],
        },
    },
    {
        id: 'bannerList',
        semanticElems: ['h3', 'p', 'span', 'a'],
        searchItems: null,
        langs: {
            ru: [
                'Получите высококачественные',
                ' обработанные компоненты HVAC',

                'Гарантия качества на каждом этапе на нашем заводе в Нанкине',

                'Найдите качественное решение, отвечающее вашим требованиям!',
                'Машины',

                'Хотите обсудить ваши требования?',
                'Contact Us',
            ],
            en: [],
        },
    },
    {
        id: 'stagesList',
        semanticElems: ['p', 'h3', 'span', 'a'],
        searchItems: null,
        langs: {
            ru: [
                'Как',
                'работает',
                'наш процесс',

                'Введение в машину',
                'Найдите машину, соответствующую вашим требованиям, на нашем сайте или отправьте нам электронное письмо, и мы свяжемся с вами в течение 4 рабочих часов.',

                'Форма запроса',
                'Свяжитесь с нами, какой объем запроса вам нужен, куда отправить нам посылку, оставьте нам контакт для получения подробной информации, если это необходимо, и будьте в курсе всех уведомлений.',

                'Упаковка',
                'Мы упаковываем каждую часть машины качественно и безопасно, а наша команда экспертов проверит, все ли на месте.',

                'Доставка',
                'Мы гарантируем своевременную доставку к вашему порогу, используя собственных водителей-экспедиторов и транспортные партнерства, что позволяет нам осуществлять доставку в любое место в кратчайшие сроки.',
            ],
            en: [],
        },
    },
    {
        id: 'experienceList',
        semanticElems: ['h2', 'p', 'span', 'a'],
        searchItems: null,
        langs: {
            ru: [
                'Более',
                'опыта в обработке систем отопления, вентиляции и кондиционирования воздуха',
                '29 лет',

                'Компания MasonCNC имеет более чем 29-летний опыт обслуживания крупнейших и наиболее аккредитованных компаний по всему Китаю, что позволило нам создать надежную репутацию в отрасли.',

                'Машины',
                'Связаться с нами',
            ],
            en: [],
        },
    },
    {
        id: 'questionsList',
        semanticElems: ['h2', 'p', 'span', 'a', 'output'],
        searchItems: null,
        langs: {
            ru: [
                'Часто задаваемые вопросы',
                'Насколько быстро вы можете производить?',
                'Мы понимаем, что могут быть срочные ситуации с поломками и производственными циклами. Поэтому мы предлагаем круглосуточную службу поддержки для любых срочных требований, чтобы вы могли двигаться вперед.',

                'Вы осуществляете доставку?',
                'Да! У нас есть собственные водители для доставки и партнерские отношения с транспортными компаниями, поэтому мы можем доставить в любую точку Австралии.',

                'Сколько времени занимает доставка?',
                'Мы осуществляем доставку на следующий день по агломерации Мельбурна и в течение 2–5 рабочих дней в любую точку Австралии.',

                'Можно ли работать с цифровыми файлами?',
                'Да! Мы можем предоставить полный спектр услуг от расчета стоимости до производства из любого цифрового файла, включая PDF.',

                'Остались вопросы?',
                'Если у вас есть вопросы о наших услугах, не стесняйтесь обращаться. Мы всегда рады помочь!',
                'Связаться с нами',
            ],
            en: [],
        },
    },
    {
        id: 'banner2List',
        semanticElems: ['h3', 'p', 'span', 'a'],
        searchItems: null,
        langs: {
            ru: [
                'Получите высококачественные',
                ' обработанные компоненты HVAC',

                'Гарантия качества на каждом этапе на нашем заводе в Нанкине',

                'Найдите качественное решение, отвечающее вашим требованиям!',
                'Машины',

                'Хотите обсудить ваши требования?',
                'Contact Us',
            ],
            en: [],
        },
    },
    {
        id: 'contactsList',
        semanticElems: ['a', 'p', 'span'],
        searchItems: null,
        langs: {
            ru: [
                'Дом',
                'Машины',
                'Индустрии',
                'О нас',
                'Связаться с нами',

                'Адрес:',
                'Контакт:',

                'judy@mason-machine.com  ',
            ],
        },
    },
    {
        id: 'mainSection',
        semanticElems: ['h3', 'p'],
        searchItems: null,
        langs: {
            ru: [
                'Наши возможности производства с ЧПУ',
                'Получите индивидуальные фрезерованные детали для быстрого',
                'прототипирования и массового производства.',
            ],
        },
    },
    {
        id: 'mainSection',
        semanticElems: ['h3', 'p'],
        searchItems: null,
        langs: {
            ru: [
                'Наши возможности производства с ЧПУ',
                'Получите индивидуальные фрезерованные детали для быстрого',
                'прототипирования и массового производства.',
            ],
        },
    },
    {
        id: 'categoryList',
        semanticElems: ['a'],
        searchItems: null,
        langs: {
            ru: [
                'Все категории',
                'Линия автоматических воздуховодов',
                'Линия спиральных воздуховодов',
                'Машина плазменной резки с ЧПУ',
                'Фальцевальная машина',
                'Машина для замков',
                'Другая машина',
            ],
        },
    },
];

const isLetter = (str) => {
    if (str.toUpperCase() === str.toLowerCase()) {
        return true;
    }
    return false;
};

const useLang = (newLang) => {
    if (newLang === 'en') {
        return true;
    }

    Array.from(useTrnsltr).map((parentBlock) => {
        const currentLang = [];
        let counter = 0;
        let section = document.getElementById(parentBlock?.id) ?? undefined;
        if (section) {
            let semanticElems =
                section.querySelectorAll(parentBlock?.semanticElems) ??
                undefined;
            if (semanticElems) {
                Array.from(semanticElems).forEach((filtered) => {
                    for (let i = 0; i < filtered?.childNodes.length; i++) {
                        if (
                            filtered?.childNodes[i]?.nodeName === '#text' &&
                            !isLetter(filtered?.childNodes[i]?.nodeValue)
                        ) {
                            let oldValue = filtered?.childNodes[i]?.nodeValue;

                            currentLang.push(oldValue.replace(/ +/g, ' '));

                            filtered.childNodes[i].data =
                                parentBlock?.langs?.ru[counter] + ' ';

                            counter++;
                        }
                    }
                });

                parentBlock.langs.en = currentLang;
            }
        }
    });
};

// Lang settings
window.addEventListener('DOMContentLoaded', () => {
    let popoverTarget =
        document.getElementById('popovertarget') ||
        document.getElementById('popoverTarget2');
    let langBtn = popoverTarget.querySelectorAll('button');
    let buttonItem = document.getElementsByClassName('button-item');

    window.location.hash = window.localStorage.getItem('hash') || 'en';

    for (let i = 0; i < buttonItem.length; i++) {
        buttonItem[i].textContent = window.localStorage.getItem('hash') || 'en';
    }

    langBtn.forEach((item) => {
        item.addEventListener('click', function () {
            let hash = item.getAttribute('data-lang');
            // Web Site Lang Set

            window.localStorage.setItem('hash', `${hash}`);
            window.location.hash = hash;
            window.location.reload();
        });
    });

    let currentLang = window.localStorage.getItem('hash') || 'en';
    useLang(currentLang);
});
